---
layout: post
title: Implementando una Static RAM y un Program Counter - CS03
published: false
---

Hoy, el objetivo es implementar una RAM estatica **(SRAM)**, esta RAM no es la tipica tarjeta RAM que normalmente se compra para los computadores ya que una SRAM es mas cara que una Dynamic RAM (DRAM), por lo general las SRAM estan dentro de la CPU.

Para completar los objetivos de este capitulo vamos implementar los siguientes chips:
- Data Flip-Flop (primitive) (Ya implementado)
- 1-bit Register
- 16-bit Register
- 16-bit / 8-register memory	
- 16-bit / 64-register memory
- 16-bit / 512-register memory
- 16-bit / 4096-register memory
- 16-bit / 16384-register memory	
- 16-bit program counter (PC)

Para lograrlo tendremos a nuestra disposicion un Data Flip-Flop que ya ha sido implementado, es decir dicha complejidad se abstrae.

# Tabla de contenidos
- Conceptos importantes
  - La grafica de una señal de reloj (concepto1)
  - Diagramas de tiempo (concepto2)
    - Flip-Flop tipo D
    - Bit
    - Registro
    - Memoria RAM
  - Logica secuencial vs Logica combinacional (concepto3, concepto4)
  - En la RAM implementada, son las operaciones de escritura secuenciales y las de lectura combinacionales?
  - Dirección en memoria VS contenido de dicha direccion (concepto6)
  - Calculando en bits el tamaño de una memoria RAM (concepto8)
  - Importancia del flanco de bajada del reloj (concepto9)
  - Utilidad del program counter en un computador (concepto10)
  - Los retardos de propagacion (reto)
- Implementando el 1-bit register
- Implementando el 16-bit register
- Implementando el 16-bit / 8 register memory
- Implementando el 16-bit / 64 register memory
- Implementando el 16-bit / 512 register memory
- Implementando el 16-bit / 4096 register memory
- Implementando el 16-bit / 16384 register memory
- Implementando el 16-bit program counter
- Codigo fuente
- Lista de chequeo y auto evaluacion
- Fuentes
 
# Conceptos importantes
## La grafica de una señal de reloj (concepto1)
![](http://imgur.com/FD627fF.gif)

Como se puede ver en la imagen el tick es la parte de la señal de reloj que vale 0 y el tock es la parte que vale 1, por otra parte el flanco de subida es el momento en el que la señal pasa de 0 a 1, y el flanco de subida el momento en el que la señal pasa de 1 a 0.

En nuestra arquitectura con el flanco de bajada termina un ciclo y empieza el siguiente (Notese que en otras arquitecturas esto puede ser diferente).

Un ciclo tarda un tiempo desde que inicia en el tick hasta que finaliza el tock con un flanco de bajada, este tiempo se conoce como periodo.

> El periodo es el tiempo que tarda un ciclo en completarse.

La cantidad de ciclos que se pueden realizar en un segundo es entonces la frecuencia y estas dos magnitudes se relacionan de la siguiente forma:

![](https://latex.codecogs.com/gif.latex?f=\frac{1}{T})

 ## Diagramas de tiempo (concepto2)
 A continuación se analiza el estado de los pines a travez del tiempo.
 ### Flip-Flop tipo D
 ![](http://imgur.com/pTORB23.gif)
 
 ### Bit
 ![](http://imgur.com/O4BcWtT.gif)
 
 ### Registro
 ![](http://imgur.com/uuEagAO.gif)
 
 
 ### Memoria RAM
 ![](http://imgur.com/i6CAF0G.gif)
 
## Logica secuencial vs Logica combinacional (concepto3, concepto4)
![](http://imgur.com/7XvlsLQ.gif)
El diagrama anterior nos puede ayudar a entender claramente la diferencia entre lógica combinaciónal y lógica secuencial, como se puede ver, la salida de una función de lógica combinacional depende unicamente de su entrada, y esta entrada en ningún caso puede ser la salida puesto que entrariamos en un loop indeterminado.

Por otra parte en un chip de lógica secuencial sa salida en el tiempo t puede depender de in(t-1) o out(t-1), esto es posible debido a que cuando ocurre in(t)=out(t-1) se esta especificando claramente a cual salida nos referimos, cosa que no pasa si nuestro chip no puede ser *"consciente"* del tiempo.

Otro tema importante que se puede explicar con la imagen es que un circuito de logica combinacional se puede usar en conjunto con uno de lógica secuencial, por ejemplo en una RAM8 se puede usar un **demultiplexor** para seleccionar un registro determinado (lógica combinacional) y luego de que el dato ha sido procesado por el registro seleccionado (Register) (lógica secuencial), dicha salida debe ser procesada por un **Multiplexor** para determinar cual de los registros tiene el dato que la salida de la RAM requiere.

Dicho lo anterior podemos enumerar unas diferencias fundamentales entre un circuito lógico combinacional y un circuito lógico secuencial:
1. El circuito secuencial es capaz de memorizar datos pasados mientras el combinacional no.
2. El circuito secuencial es *"consciente"* del tiempo mientras el combinacional no.
3. El circuito secuencial puede ser funcion de in(t-1) o out(t-1) mientras el combinacional al no ser *"consciente"* del tiempo depende unicamente de in.

## En la RAM implementada, ¿son las operaciones de escritura secuenciales y las de lectura combinacionales?
Para detallar mas la pregunta: En relación a las memorias RAM implementadas, ¿se puede decir que las operaciones de escritura son secuenciales y las de lectura son combinacionales?

A esta pregunta mi respuesta es **NO**, porque el hecho de que una operación sea de lectura o escritura no hace que los registros (los cuales son circuitos secuenciales) dejen de usarse, los registros se usan siempre y lo unico que cambia cuando una operación es de lectura o escritura es en funcion de quien queda el circuito: Cuando es de lectura queda en función de out(t-1) y cuando es una operación de escritura queda en función de in(t-1) en ambos casos el circuito debe ser *"consciente"* del tiempo y esta propiedad no la poseen los circuitos combinacionales.

**Por ejemplo**:
Supongamos que tenemos una RAM de 8 registros, y que en el registro 03 en el tiempo 2 hay un 15 almacenado.

Si en el flanco de bajada load es igual a 0 (operación de lectura) en el tiempo 3 el out sera 15, es decir out(t)=out(t-1), lo cual indica claramente que en una operación de lectura la operación depende del tiempo, por lo tanto es un circuito secuencial.

## Direccion en memoria VS contenido de dicha direccion (concepto6)
Son dos conceptos relacionados pero diferentes, si nos referimos a una direccion de memoria nos estamos referiendo a un registro especifico de la memoria RAM, seria como señalar el registro al cual nos referimos con el dedo, en cambio el contenido de una dirección de memoria es la información almacenada en dicho registro, serial algo como leer la información almacenada en el registro señalado anteriormente con el dedo.

NOTA: El contenido de una direción en memoria puede ser a su vez otra dirección en memoria.

## Calculando en bits el tamaño de una memoria RAM (concepto8)
Supongamos que conocemos que el bus de direcciones de nuestra memoria RAM tiene n bits y que cada registro en la memoria tiene un ancho de m bits, ¿Cual es la capacidad de la memoria RAM?

Para responder a esta pregunta primero debemos responder cuantos registros tiene la memoria RAM, esto se puede calcular facilmente con la siguiente ecuación.

![](https://latex.codecogs.com/gif.latex?VR_2^n&space;=&space;2^n)

La cual es la ecuación de la variación con repetecion de un grupo de 2 elementos (true y false) tomados de n en n, en otras palabras esta es la ecuación que nos dice cuantos numeros (en este caso registros) se pueden representar con los n bits del bus de la RAM.

En este punto ya conocemos el numero de registros de nuestra memoria RAM y tambien conocemos el ancho de cada registro (m bits) con esta información seria simplemente cuestion de multiplicar estos dos valores para obtener la capacidad de la memoria RAM en bits.

![](https://latex.codecogs.com/gif.latex?Capacity&space;=&space;2^n*m)

Y la anterior seria la formula general en función de n y m para calcular el tamaño en bits de una memoria RAM.


# Codigo fuente
- [("Código fuente") Cableado implementado para los chips del capítulo](https://github.com/jorovipe97/computer_science_code/tree/master/projects/03)

# Lista de chequeo y autoevaluacion
- Lista de chequeo
- Autoevaluación

# Fuentes
- [Periodo](https://es.wikipedia.org/wiki/Per%C3%ADodo_de_oscilaci%C3%B3n)
- [Frecuencia](https://es.wikipedia.org/wiki/Frecuencia)
- [Static RAM vs Dynamic RAM](https://www.quora.com/What-is-the-difference-between-DRAM-SRAM-and-SDRAM-Which-one-is-the-best-RAM-technology)
- [Nand2tetris chapter 3](http://nand2tetris.org/03.php)
